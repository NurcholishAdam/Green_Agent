# Add: .github/workflows/agentbeats.yml

name: AgentBeats Assessment

on:
  workflow_dispatch:
    inputs:
      purple_agent_id:
        description: 'Purple agent ID to evaluate'
        required: true

jobs:
  run-assessment:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Build Green Agent
        run: docker build -t green-sustainability:latest .
      
      - name: Run Assessment
        env:
          PURPLE_AGENT_ID: ${{ github.event.inputs.purple_agent_id }}
          AGENTBEATS_API_KEY: ${{ secrets.AGENTBEATS_API_KEY }}
        run: |
          docker run --rm \
            -e PURPLE_AGENT_ID \
            -e AGENTBEATS_API_KEY \
            -v $(pwd)/results:/app/results \
            green-sustainability:latest
      
      - name: Upload Results
        uses: actions/upload-artifact@v3
        with:
          name: assessment-results
          path: results/
